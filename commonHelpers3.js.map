{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst elements = {\n  form: document.querySelector('.feedback-form'),\n  emailInput: document.querySelector('[name=\"email\"]'),\n  messageInput: document.querySelector('[name=\"message\"]'),\n};\n\nconst FORM_KEY = 'feedback-form-state';\nconst THROTTLE_INTERVAL = 500;\n\nfunction setFormData() {\n  const formData = {\n    email: elements.emailInput.value,\n    message: elements.messageInput.value,\n  };\n\n  try {\n    localStorage.setItem(FORM_KEY, JSON.stringify(formData));\n  } catch (error) {\n    console.error(`Failed to save data to localStorage: ${error.message}`);\n  }\n}\n\nfunction getFormData() {\n  try {\n    const savedFormData = localStorage.getItem(FORM_KEY);\n    return savedFormData ? JSON.parse(savedFormData) : null;\n  } catch (error) {\n    console.error(\n      `Failed to retrieve data from localStorage: ${error.message}`\n    );\n    return null;\n  }\n}\n\nfunction resetFormAndRemoveData(event) {\n  event.preventDefault();\n\n  if (elements.emailInput.value && elements.messageInput.value) {\n    const formData = {\n      email: elements.emailInput.value,\n      message: elements.messageInput.value,\n    };\n\n    console.log('Submitted form data:', formData);\n    elements.form.reset();\n\n    try {\n      localStorage.removeItem(FORM_KEY);\n    } catch (error) {\n      console.error(\n        `Failed to remove data from localStorage: ${error.message}`\n      );\n    }\n  } else {\n    console.error('All form fields must be filled out');\n  }\n}\n\nconst throttledSetFormData = throttle(setFormData, THROTTLE_INTERVAL);\n\nelements.form.addEventListener('input', throttledSetFormData);\nelements.form.addEventListener('submit', resetFormAndRemoveData);\n\nconst savedFormData = getFormData();\nif (savedFormData) {\n  elements.emailInput.value = savedFormData.email || '';\n  elements.messageInput.value = savedFormData.message || '';\n}\n"],"names":["elements","FORM_KEY","THROTTLE_INTERVAL","setFormData","formData","error","getFormData","savedFormData","resetFormAndRemoveData","event","throttledSetFormData","throttle"],"mappings":"wIAEA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,gBAAgB,EAC7C,WAAY,SAAS,cAAc,gBAAgB,EACnD,aAAc,SAAS,cAAc,kBAAkB,CACzD,EAEMC,EAAW,sBACXC,EAAoB,IAE1B,SAASC,GAAc,CACrB,MAAMC,EAAW,CACf,MAAOJ,EAAS,WAAW,MAC3B,QAASA,EAAS,aAAa,KACnC,EAEE,GAAI,CACF,aAAa,QAAQC,EAAU,KAAK,UAAUG,CAAQ,CAAC,CACxD,OAAQC,EAAO,CACd,QAAQ,MAAM,wCAAwCA,EAAM,OAAO,EAAE,CACtE,CACH,CAEA,SAASC,GAAc,CACrB,GAAI,CACF,MAAMC,EAAgB,aAAa,QAAQN,CAAQ,EACnD,OAAOM,EAAgB,KAAK,MAAMA,CAAa,EAAI,IACpD,OAAQF,EAAO,CACd,eAAQ,MACN,8CAA8CA,EAAM,OAAO,EACjE,EACW,IACR,CACH,CAEA,SAASG,EAAuBC,EAAO,CAGrC,GAFAA,EAAM,eAAc,EAEhBT,EAAS,WAAW,OAASA,EAAS,aAAa,MAAO,CAC5D,MAAMI,EAAW,CACf,MAAOJ,EAAS,WAAW,MAC3B,QAASA,EAAS,aAAa,KACrC,EAEI,QAAQ,IAAI,uBAAwBI,CAAQ,EAC5CJ,EAAS,KAAK,QAEd,GAAI,CACF,aAAa,WAAWC,CAAQ,CACjC,OAAQI,EAAO,CACd,QAAQ,MACN,4CAA4CA,EAAM,OAAO,EACjE,CACK,CACL,MACI,QAAQ,MAAM,oCAAoC,CAEtD,CAEA,MAAMK,EAAuBC,EAASR,EAAaD,CAAiB,EAEpEF,EAAS,KAAK,iBAAiB,QAASU,CAAoB,EAC5DV,EAAS,KAAK,iBAAiB,SAAUQ,CAAsB,EAE/D,MAAMD,EAAgBD,EAAW,EAC7BC,IACFP,EAAS,WAAW,MAAQO,EAAc,OAAS,GACnDP,EAAS,aAAa,MAAQO,EAAc,SAAW"}